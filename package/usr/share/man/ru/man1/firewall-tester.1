.\" Manpage for firewall-tester.
.\" Contact svirepunchik@gmail.com to correct errors or typos.
.TH firewall-tester 1 "04 Apr 2018" "1.0" "firewall-tester man page"
.SH НАЗВАНИЕ
firewall-tester \- bash-скрипт, использующий NMAP, для проверки открытых портов на стороннем сервере или по списку серверов.
.SH СИНТАКСИС
firewall-tester [-h] [-s server_name|server_ip] [-a "allowed_port1, allowed_port2, ..., allowed_port n"] [-l /path/to/log.file] [-b]
.SH ОПИСАНИЕ
В обычном режиме принимает на вход имя сервера (или его IP-адрес) и список разрешённых для сервера портов. На выходе будет выдан список открытых портов сервера с исключением разрешённых. Таким обрахом вы можете сразу узнать, что на целевом сервере есть несанкционированно открытые порты.
.SH ОПЦИИ
Короткие:
  -h                              — показывает help.
  -s <server name or IP>          — указывает целевой сервер. По-умолчанию 127.0.0.1.
  -a "port1, port2, ..., portN"   — указывает список разрешённых портов для целевого сервера. По-умолчанию "22, 80, 443".
  -l /path/to/log.file            — указывает другой лог-файл. По-умолчанию /var/log/firewall.scan.log.
  -b                              — запускает batch режим. В этом режиме список целевых серверов и их разрешённых портов берётся из /etc/firewall-tester/server.list. По-умолчанию выключен.
  
Длинные:
  --help      — то же самое, что -h
  --server    — то же самое, что -s
  --allowed   — то же самое, что -a
  --logfile   — то же самое, что -l
  --batch     — то же самое, что -b
.SH ФОРМАТ /etc/firewall-tester/server.list
  server1 <tab> port1, port2, ..., portN
  server2 <tab> port1, port2, ..., portN
  ...
  serverN <tab> port1, port2, ..., portN
.SH ХУКИ
Хуки расположены в /usr/lib/firewall-tester. В этой папке всего два файла:
  hook-server.sh \- вызывается, когда скрипт обнаруживает хотя бы один открытый порт на целевом сервере, который не входит в список разрешённых. Он получает на вход три параметра:
    1. имя сервера (или его ip)
    2. список разрешённых для этого сервера портов
    3. список открытых портов, за исключением разрешённых
  
  hook-all.sh \- вызывается, когда скрипт обнаруживает хотябы один открытый порт хотя бы на одном целевом сервере. На вход он не получает ничего.
.SH БАГИ
Пока не замечено.
.SH АВТОР
Дмитрий Свинцов (svirepunchik@gmail.com)
