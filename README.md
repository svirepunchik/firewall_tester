# firewall test script
TODO:
install.sh & port ranges
## In English:
comnig soon

## По-русски:
В последнее время стало мне доставаться на поддержку много серверов от, мягко говоря, странных админов. Суть в том, что (ОКАЗЫВАЕТСЯ) многие админы не следят за сетевой безопасностью вверенных им серверов — и вроде в фаерволе даже правила есть, и вроде даже fail2ban настроен на защиту 22го порта, НО... При детальном осмотре, как правило, выясняется две вещи:
1. Несмотря на наличие правил в фаерволе, цепочка INPUT стоит в ACCEPT;
2. fail2ban установлен, но не настроено никакое действие в нём.

Это жопа, товарищи!

Чтобы не вчитываться личшний раз в конфиги, я решил написать скрипт, который сразу будет сообщать, какие из портов на целевых серверах открыты.
Конфиг серверов и положенных им открытых наружу портов лежит в файле servers.list

### Установка
Всё очень просто и прозрачно — клонируемся, запускаем install.sh и радуемся. Логи глядим в /var/log/firewall.scan.log.
install.sh сам создаст в cron задачу по мониторингу серверов из списка server.list.

### Batch-режим
Формат server.list:
server_ip | server_name [tab] port_1,port_2,...,port_N

После того, как вы заполнили server.list, задача в cron будет сама мониторить все сервера из списка, писать в лог и вызывать хуки

### Хуки
hook.server.sh — хук, вызываемый для каждого сервера, в том числе в batch режиме
hook.all.sh — хук, вызываемый после обработки всех серверов только в batch режиме
